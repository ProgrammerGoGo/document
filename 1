


项目名称:服务商后台搭建与维护
涉及技术:Kafka、Redis、MySQL、Spring、分布式锁
背景：商家和服务商签约后，服务商负责替商家运营，服务商代商家运营期间，会商家收益中抽佣。
项目描述:商家和服务商签约并生效后，会生成佣金快照，用于记录该时间点服务商的佣金情况。用户下单支付成功后，根据交易支付消息以及分销结果计算归因时间点，从而匹配在改时间点应从商家抽取佣金的快照信息。计算最终分佣情况后，结算侧拉取订单分佣情况，进行最终的结算。
关键技术点:
1、服务商签约商家时，对商家id维度加锁。（要求同一时间段，同一商家只能和同一服务商签约）
2、服务商签约商家的佣金变化时，记录佣金快照。包括实时和离线对账逻辑，确保合约佣金信息和快照佣金信息保持一致。
3、交易订单佣金率匹配。包括异常重试，以及消息丢失场景问题。
4、订单佣金信息分表存储。












