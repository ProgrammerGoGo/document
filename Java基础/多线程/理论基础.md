
> [Java 并发 - 理论基础](https://pdai.tech/md/java/thread/java-thread-x-theorty.html)


# 计算机的组成

<img width="1351" alt="截屏2023-10-13 下午8 28 09" src="https://github.com/ProgrammerGoGo/document/assets/98639494/85e5bcd9-64ba-4237-9196-54feff5ba5ee">

# 为什么需要多线程？

众所周知，CPU、内存、I/O 设备的速度是有极大差异的，为了合理利用 CPU 的高性能，平衡这三者的速度差异，计算机体系结构、操作系统、编译程序都做出了贡献，主要体现为:  
* CPU：CPU 增加了缓存，以均衡与内存的速度差异；// 导致 `可见性` 问题
* 操作系统：增加了进程、线程，以分时复用 CPU，进而均衡 CPU 与 I/O 设备的速度差异；// 导致 `原子性` 问题
* 编译器：编译程序优化指令执行次序，使得缓存能够得到更加合理地利用。// 导致 `有序性` 问题

## 并发三要素

* 可见性：CPU缓存导致
* 原子性：分时复用导致
* 有序性：重排序导致

### 可见性

可见性：一个线程对共享变量的修改，另外一个线程能够立刻看到。


### 原子性

原子性：即一个操作或者多个操作 要么全部执行并且执行的过程不会被任何因素打断，要么就都不执行。

### 有序性

有序性：即程序执行的顺序按照代码的先后顺序执行。

## 线程不安全示例

1000个线程同时对int型变量自增一次，最终结果可能小于1000。





